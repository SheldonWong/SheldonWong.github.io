<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="jos," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="&amp;#x4ECB;&amp;#x7ECD;JOS&amp;#x662F;MIT&amp;#x7684;&amp;#x64CD;&amp;#x4F5C;&amp;#x7CFB;&amp;#x7EDF;&amp;#x5B9E;&amp;#x9A8C;&amp;#x8BFE;&amp;#xFF0C;&amp;#x548C;MIT&amp;#x7684;&amp;#x5176;&amp;#x4ED6;&amp;#x8BFE;&amp;#x7A0B;&amp;#x4E00;&amp;#x6837;&amp;#xFF0C;&amp;#x8D28;&amp;#x91CF;&amp;#x5F88">
<meta property="og:type" content="article">
<meta property="og:title" content="JOS1">
<meta property="og:url" content="http://yoursite.com/2017/01/08/JOS1/index.html">
<meta property="og:site_name" content="未来世界">
<meta property="og:description" content="&amp;#x4ECB;&amp;#x7ECD;JOS&amp;#x662F;MIT&amp;#x7684;&amp;#x64CD;&amp;#x4F5C;&amp;#x7CFB;&amp;#x7EDF;&amp;#x5B9E;&amp;#x9A8C;&amp;#x8BFE;&amp;#xFF0C;&amp;#x548C;MIT&amp;#x7684;&amp;#x5176;&amp;#x4ED6;&amp;#x8BFE;&amp;#x7A0B;&amp;#x4E00;&amp;#x6837;&amp;#xFF0C;&amp;#x8D28;&amp;#x91CF;&amp;#x5F88">
<meta property="og:image" content="http://yoursite.com/2017/01/08/JOS1/Exercise2.png">
<meta property="og:image" content="http://yoursite.com/2017/01/08/JOS1/Exercise3.png">
<meta property="og:image" content="http://yoursite.com/2017/01/08/JOS1/Exercise3_1.png">
<meta property="og:image" content="http://yoursite.com/2017/01/08/JOS1/Exercise3_2.png">
<meta property="og:image" content="http://yoursite.com/2017/01/08/JOS1/Exercise3_3.png">
<meta property="og:image" content="http://yoursite.com/2017/01/08/JOS1/Exercise3_4.png">
<meta property="og:image" content="http://yoursite.com/2017/01/08/JOS1/Exercise3_5.png">
<meta property="og:updated_time" content="2017-01-11T02:55:02.262Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JOS1">
<meta name="twitter:description" content="&amp;#x4ECB;&amp;#x7ECD;JOS&amp;#x662F;MIT&amp;#x7684;&amp;#x64CD;&amp;#x4F5C;&amp;#x7CFB;&amp;#x7EDF;&amp;#x5B9E;&amp;#x9A8C;&amp;#x8BFE;&amp;#xFF0C;&amp;#x548C;MIT&amp;#x7684;&amp;#x5176;&amp;#x4ED6;&amp;#x8BFE;&amp;#x7A0B;&amp;#x4E00;&amp;#x6837;&amp;#xFF0C;&amp;#x8D28;&amp;#x91CF;&amp;#x5F88">
<meta name="twitter:image" content="http://yoursite.com/2017/01/08/JOS1/Exercise2.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 'undefined',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/01/08/JOS1/"/>





  <title>JOS1 | 未来世界</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  















  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">未来世界</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">sheldonwong's blog</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-navigator">
          <a href="/navigator" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            导航
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/08/JOS1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sheldonwong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="未来世界">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">JOS1</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-08T20:06:40+08:00">
                2017-01-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/kernel/" itemprop="url" rel="index">
                    <span itemprop="name">kernel</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a class="cloud-tie-join-count" href="/2017/01/08/JOS1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count join-count" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="&#x4ECB;&#x7ECD;"><a href="#&#x4ECB;&#x7ECD;" class="headerlink" title="&#x4ECB;&#x7ECD;"></a>&#x4ECB;&#x7ECD;</h2><p>JOS&#x662F;MIT&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5B9E;&#x9A8C;&#x8BFE;&#xFF0C;&#x548C;MIT&#x7684;&#x5176;&#x4ED6;&#x8BFE;&#x7A0B;&#x4E00;&#x6837;&#xFF0C;&#x8D28;&#x91CF;&#x5F88;&#x9AD8;&#x3002;<br>&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x662F;&#x4E3A;&#x4E86;&#x8BB0;&#x5F55;JOS&#x5B9E;&#x9A8C;1&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x53E6;&#x5916;&#x662F;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x81EA;&#x5DF1;&#x5077;&#x61D2;&#xFF0C;&#x4E0D;&#x60F3;&#x5728;&#x4E00;&#x4EF6;&#x4E8B;&#x4E0A;&#x62D6;&#x62C9;&#x592A;&#x4E45;&#x3002;</p>
<p>JOS&#x5B9E;&#x9A8C;1&#x7684;&#x4E3B;&#x8981;&#x4EFB;&#x52A1;&#x662F;</p>
<ul>
<li>&#x7B2C;&#x4E00;&#x90E8;&#x5206;&#x719F;&#x6089;x86&#x6C47;&#x7F16;&#x8BED;&#x8A00;&#xFF0C;Qemu x86&#x6A21;&#x62DF;&#x5668;&#xFF0C;&#x4EE5;&#x53CA;PC&#x7684;&#x52A0;&#x7535;&#x542F;&#x52A8;&#x8FC7;&#x7A0B;(Parts1&#xFF1A;PC Bootstrap)</li>
<li>&#x7B2C;&#x4E8C;&#x90E8;&#x5206;&#x9605;&#x8BFB;6.828&#x7684;kernel&#x7684;bootloader&#xFF0C;&#x4EE5;&#x53CA;lab&#x76EE;&#x5F55;&#x4E0B;&#x7684;boot&#x76EE;&#x5F55;(Parts2: Boot Loader)</li>
<li>&#x7B2C;&#x4E09;&#x90E8;&#x5206;&#x6DF1;&#x5165;6.828&#x7684;&#x521D;&#x59CB;&#x5316;&#x90E8;&#x5206;&#xFF0C;kernel&#x76EE;&#x5F55;&#x4E0B;&#x7684;JOS(Parts3:The Kernel)</li>
</ul>
<p>&#x5148;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x4E0A;&#x9762;&#x7684;&#x4EFB;&#x52A1;</p>
<ol>
<li>&#x7B2C;&#x4E00;&#x90E8;&#x5206;&#x4E3B;&#x8981;&#x5C31;&#x662F;&#x719F;&#x6089;x86&#x6C47;&#x7F16;&#x8BED;&#x8A00;&#xFF0C;&#x4EE5;&#x53CA;Qemu&#x548C;GDB&#x8054;&#x8C03;JOS&#x3002;</li>
<li>&#x7B2C;&#x4E8C;&#x90E8;&#x5206;&#x5C31;&#x662F;&#x8981;&#x9605;&#x8BFB;bootloader&#x4E0B;&#x6E90;&#x7801;&#xFF0C;&#x7ED3;&#x5408;obj&#x4E0B;&#x7684;&#x53CD;&#x6C47;&#x7F16;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x4EE5;&#x53CA;GDB&#x548C;Qemu&#x8054;&#x8C03;JOS&#xFF0C;&#x63A2;&#x7D22;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5728;&#x542F;&#x52A8;&#x9636;&#x6BB5;&#x505A;&#x4E86;&#x4E9B;&#x4EC0;&#x4E48;&#x3002;</li>
<li>&#x7B2C;&#x4E09;&#x90E8;&#x5206;&#x5C31;&#x662F;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x542F;&#x52A8;&#x5B8C;&#x540E;&#x7684;&#x521D;&#x59CB;&#x5316;&#x90E8;&#x5206;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x521D;&#x59CB;&#x5316;&#x5C4F;&#x5E55;&#x663E;&#x793A;&#x548C;&#x521D;&#x59CB;&#x5316;&#x6808;&#x3002;</li>
</ol>
<p>&#x76F8;&#x5E94;&#x7684;&#x5B9E;&#x9A8C;&#x4E5F;&#x5206;&#x4E3A;3&#x90E8;&#x5206;&#xFF0C;&#x9650;&#x4E8E;&#x7BC7;&#x5E45;&#xFF0C;&#x6BCF;&#x7BC7;&#x8BB2;&#x89E3;&#x4E00;&#x90E8;&#x5206;&#x3002;</p>
<h2 id="PC&#x7684;&#x542F;&#x52A8;"><a href="#PC&#x7684;&#x542F;&#x52A8;" class="headerlink" title="PC&#x7684;&#x542F;&#x52A8;"></a>PC&#x7684;&#x542F;&#x52A8;</h2><h3 id="&#x7EC3;&#x4E60;1-&#x719F;&#x6089;&#x6C47;&#x7F16;"><a href="#&#x7EC3;&#x4E60;1-&#x719F;&#x6089;&#x6C47;&#x7F16;" class="headerlink" title="&#x7EC3;&#x4E60;1 &#x719F;&#x6089;&#x6C47;&#x7F16;"></a>&#x7EC3;&#x4E60;1 &#x719F;&#x6089;&#x6C47;&#x7F16;</h3><p>Exercise 1. Familiarize yourself with the assembly language materials available on <a href="https://pdos.csail.mit.edu/6.828/2016/reference.html" target="_blank" rel="external">the 6.828 reference page</a>. You don&#x2019;t have to read them now, but you&#x2019;ll almost certainly want to refer to some of this material when reading and writing x86 assembly</p>
<p>We do recommend reading the section &#x201C;The Syntax&#x201D; in <a href="http://www.delorie.com/djgpp/doc/brennan/brennan_att_inline_djgpp.html" target="_blank" rel="external">Brennan&#x2019;s Guide to Inline Assembly</a>. It gives a good (and quite brief) description of the AT&amp;T assembly syntax we&#x2019;ll be using with the GNU assembler in JOS.</p>
<p>&#x5B9E;&#x9A8C;1&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x597D;&#x8BF4;&#x7684;&#xFF0C;&#x5C31;&#x662F;&#x53BB;&#x719F;&#x6089;&#x4E0B;&#x6C47;&#x7F16;&#x8BED;&#x8A00;&#xFF0C;&#x5982;&#x679C;&#x5B66;&#x8FC7;x86&#x6C47;&#x7F16;&#x5C31;&#x4F1A;&#x5F88;&#x5BB9;&#x6613;&#xFF0C;&#x56E0;&#x4E3A;AT&amp;T&#x7684;&#x6C47;&#x7F16;&#x8BED;&#x6CD5;&#x548C;x86&#x7684;&#x6C47;&#x7F16;&#x51E0;&#x4E4E;&#x662F;&#x4E00;&#x4E00;&#x5BF9;&#x5E94;&#x7684;&#x3002;</p>
<h3 id="&#x7EC3;&#x4E60;2-&#x8C03;&#x8BD5;&#x63A2;&#x7D22;BIOS&#x7684;&#x529F;&#x80FD;"><a href="#&#x7EC3;&#x4E60;2-&#x8C03;&#x8BD5;&#x63A2;&#x7D22;BIOS&#x7684;&#x529F;&#x80FD;" class="headerlink" title="&#x7EC3;&#x4E60;2 &#x8C03;&#x8BD5;&#x63A2;&#x7D22;BIOS&#x7684;&#x529F;&#x80FD;"></a>&#x7EC3;&#x4E60;2 &#x8C03;&#x8BD5;&#x63A2;&#x7D22;BIOS&#x7684;&#x529F;&#x80FD;</h3><p>Exercise 2. Use GDB&#x2019;s si (Step Instruction) command to trace into the ROM BIOS for a few more instructions, and try to guess what it might be doing. You might want to look at <a href="http://web.archive.org/web/20040404164813/members.iweb.net.au/~pstorr/pcbook/book2/book2.htm" target="_blank" rel="external">Phil Storrs I/O Ports Description</a>, as well as other materials on the <a href="https://pdos.csail.mit.edu/6.828/2016/reference.html" target="_blank" rel="external">6.828 reference materials page</a>. No need to figure out all the details - just the general idea of what the BIOS is doing first.</p>
<p>&#x5B9E;&#x9A8C;2&#x4E3B;&#x8981;&#x662F;&#x5B66;&#x4F1A;&#x4F7F;&#x7528;Qemu&#x548C;GDB&#x8054;&#x8C03;&#xFF0C;&#x901A;&#x8FC7;si&#x547D;&#x4EE4;&#xFF0C;&#x63A2;&#x7D22;&#x542F;&#x52A8;&#x9636;&#x6BB5;BIOS&#x505A;&#x4E86;&#x4EC0;&#x4E48;&#x4E8B;&#x60C5;&#x3002;&#x5177;&#x4F53;&#x505A;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;</p>
<ol>
<li>&#x9996;&#x5148;cd&#x5230;&#x8BFE;&#x7A0B;&#x76EE;&#x5F55;&#x4E0B;</li>
<li>&#x5728;&#x4E00;&#x4E2A;&#x7EC8;&#x7AEF;&#x4E2D;&#x8FD0;&#x884C;&#x201C;make qemu-gdb&#x201D;,&#x5728;&#x53E6;&#x4E00;&#x4E2A;&#x7A97;&#x53E3;&#x4E2D;&#x8FD0;&#x884C;&#x201C;make gdb&#x201D;</li>
<li>&#x7136;&#x540E;&#x5C31;&#x4E00;&#x76F4;si&#xFF08;&#x5355;&#x6B65;&#x6267;&#x884C;&#xFF09;&#xFF0C;&#x76F4;&#x5230;BIOS&#x7ED3;&#x675F;<br>&#x5982;&#x56FE;&#x6240;&#x793A;<br><img src="/2017/01/08/JOS1/Exercise2.png" alt=""><br>&#x4E0B;&#x9762;&#x7B80;&#x5355;&#x7684;&#x5BF9;3&#x548C;4&#x505A;&#x4E2A;&#x8BF4;&#x660E;<br>3&#x5904;&#x662F;PC&#x52A0;&#x7535;&#x542F;&#x52A8;&#x540E;&#x7684;&#x7B2C;&#x4E00;&#x6761;&#x547D;&#x4EE4;&#xFF0C;&#x53EA;&#x662F;&#x4E00;&#x6761;&#x8DF3;&#x8F6C;&#x547D;&#x4EE4;&#xFF0C;&#x8DF3;&#x8F6C;&#x5230;&#x52A0;&#x8F7D;BIOS&#x7684;&#x5730;&#x65B9;&#x3002;<br>4&#x5904;&#x662F;&#x6267;&#x884C;si&#x5355;&#x6B65;&#x8C03;&#x8BD5;&#x3002;</li>
</ol>
<h3 id="&#x7EC3;&#x4E60;3-&#x8C03;&#x8BD5;&#x63A2;&#x7D22;boot-loader"><a href="#&#x7EC3;&#x4E60;3-&#x8C03;&#x8BD5;&#x63A2;&#x7D22;boot-loader" class="headerlink" title="&#x7EC3;&#x4E60;3 &#x8C03;&#x8BD5;&#x63A2;&#x7D22;boot loader"></a>&#x7EC3;&#x4E60;3 &#x8C03;&#x8BD5;&#x63A2;&#x7D22;boot loader</h3><p>Exercise 3. Take a look at the <a href="https://pdos.csail.mit.edu/6.828/2016/labguide.html" target="_blank" rel="external">lab tools guide</a>, especially the section on GDB commands. Even if you&#x2019;re familiar with GDB, this includes some esoteric GDB commands that are useful for OS work.</p>
<p>Set a breakpoint at address 0x7c00, which is where the boot sector will be loaded. Continue execution until that breakpoint. Trace through the code in boot/boot.S, using the source code and the disassembly file obj/boot/boot.asm to keep track of where you are. Also use the x/i command in GDB to disassemble sequences of instructions in the boot loader, and compare the original boot loader source code with both the disassembly in obj/boot/boot.asm and GDB.</p>
<p>Trace into bootmain() in boot/main.c, and then into readsect(). Identify the exact assembly instructions that correspond to each of the statements in readsect(). Trace through the rest of readsect() and back out into bootmain(), and identify the begin and end of the for loop that reads the remaining sectors of the kernel from the disk. Find out what code will run when the loop is finished, set a breakpoint there, and continue to that breakpoint. Then step through the remainder of the boot loader.</p>
<p>&#x5B9E;&#x9A8C;3&#x4E3B;&#x8981;&#x662F;&#x4E3A;&#x4E86;&#x719F;&#x6089;&#x66F4;&#x591A;&#x7684;GDB&#x8C03;&#x8BD5;&#x547D;&#x4EE4;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;GDB&#x8C03;&#x8BD5;boot loader&#x3002;<br>3.1 &#x9996;&#x5148;&#x5728;0x7c00&#xFF08;boot&#x6247;&#x533A;&#x88AB;&#x52A0;&#x8F7D;&#x5230;&#x7684;&#x5730;&#x65B9;&#xFF09;&#x5904;&#x8BBE;&#x7F6E;&#x65AD;&#x70B9;&#xFF0C;&#x6267;&#x884C;&#x5230;&#x65AD;&#x70B9;&#x3002;&#x8DDF;&#x8E2A;boot.S&#xFF0C;&#x4F7F;&#x7528;&#x6E90;&#x7801;&#x548C;&#x53CD;&#x6C47;&#x7F16;&#x6587;&#x4EF6;&#x786E;&#x5B9A;&#x4F60;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x4F7F;&#x7528;x/i&#x547D;&#x4EE4;&#x53CD;&#x6C47;&#x7F16;boot loader&#x4E2D;&#x7684;&#x547D;&#x4EE4;&#x5E8F;&#x5217;&#x3002;&#x6BD4;&#x8F83;boot loader&#x7684;&#x6E90;&#x7801;&#x3001;&#x53CD;&#x6C47;&#x7F16;&#x6587;&#x4EF6;boot.asm&#x3001;GDB&#x3002;<br>3.2 &#x8DDF;&#x8E2A;&#x8FDB;&#x5165;bootmain(),&#x7136;&#x540E;&#x5728;&#x8FDB;&#x5165;readsect().&#x8BC6;&#x522B;&#x51FA;readsect()&#x51FD;&#x6570;&#x5BF9;&#x5E94;&#x7684;&#x53CD;&#x6C47;&#x7F16;&#x6307;&#x4EE4;&#x3002;&#x8DDF;&#x8E2A;readsect()&#x5269;&#x4F59;&#x90E8;&#x5206;&#x5E76;&#x8FD4;&#x56DE;&#x5230;bootmain().&#x8BC6;&#x522B;&#x4ECE;&#x786C;&#x76D8;&#x7684;&#x6247;&#x533A;&#x4E2D;&#x8BFB;&#x53D6;kernel&#x7684;&#x5FAA;&#x73AF;&#x7684;&#x5F00;&#x59CB;&#x548C;&#x7ED3;&#x675F;&#x3002;&#x627E;&#x51FA;&#x5FAA;&#x73AF;&#x7ED3;&#x675F;&#x65F6;&#x8981;&#x6267;&#x884C;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5728;&#x90A3;&#x91CC;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x65AD;&#x70B9;&#xFF0C;&#x6267;&#x884C;&#x5230;&#x65AD;&#x70B9;&#x3002;&#x7136;&#x540E;&#x5355;&#x6B65;boot loader&#x5269;&#x4F59;&#x7684;&#x90E8;&#x5206;&#x3002;</p>
<p>&#x5176;&#x4E2D;&#x7B2C;&#x4E00;&#x90E8;&#x5206;&#x8F83;&#x4E3A;&#x7B80;&#x5355;&#xFF0C;&#x6267;&#x884C;&#xFF1A;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b *0x7c00</span><br><span class="line">c</span><br></pre></td></tr></table></figure></p>
<p>&#x7ED3;&#x679C;&#x5982;&#x56FE;&#x6240;&#x793A;&#xFF1A;<br><img src="/2017/01/08/JOS1/Exercise3.png" alt=""><br>&#x5176;&#x4E2D;&#x7B2C;&#x4E8C;&#x4E2A;&#x7A97;&#x53E3;&#x662F;GDB&#x8C03;&#x8BD5;&#x7A97;&#x53E3;<br>&#x7B2C;&#x4E09;&#x4E2A;&#x7A97;&#x53E3;&#x662F;&#x6E90;&#x7801;&#x6587;&#x4EF6;   lab/boot/boot.S<br>&#x7B2C;&#x56DB;&#x4E2A;&#x7A97;&#x53E3;&#x662F;&#x53CD;&#x6C47;&#x7F16;&#x6587;&#x4EF6; lab/obj/boot/boot.asm<br>&#x53EF;&#x4EE5;&#x6E05;&#x695A;&#x7684;&#x770B;&#x5230;&#xFF0C;&#x4E09;&#x4E2A;&#x7A97;&#x53E3;&#x7684;&#x5185;&#x5BB9;&#x76F8;&#x540C;&#x3002;</p>
<p>&#x7B2C;&#x4E8C;&#x90E8;&#x5206;&#x8981;&#x8DDF;&#x8E2A;&#x8FDB;&#x5165;bootmain(),&#x5728;&#x8FDB;&#x5EA6;readsect(),&#x9996;&#x5148;&#x8FD8;&#x662F;&#x8BBE;&#x7F6E;&#x65AD;&#x70B9;&#xFF0C;&#x501F;&#x52A9;&#x4E8E;&#x6587;&#x4EF6;obj/boot/boot.asm&#x4E2D;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x53EF;&#x4EE5;&#x77E5;&#x9053;bootmain&#x7684;&#x5730;&#x5740;&#x4F4D;0x7d0a<br><img src="/2017/01/08/JOS1/Exercise3_1.png" alt=""><br>&#x4E8E;&#x662F;&#xFF0C;&#x5728;0x7d0a&#x5904;&#x8BBE;&#x7F6E;&#x65AD;&#x70B9;&#xFF0C;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b *0x7d0a</span><br><span class="line">c</span><br></pre></td></tr></table></figure></p>
<p>bootmain&#x8C03;&#x7528;readseg(),readseg()&#x5FAA;&#x73AF;&#x8C03;&#x7528;readsect(),<br>main.c&#x4E2D;&#x7684;bootmain()&#x51FD;&#x6570;,&#x8C03;&#x7528;&#x4E86;readseg()<br><img src="/2017/01/08/JOS1/Exercise3_2.png" alt=""><br>main.c&#x4E2D;&#x7684;readseg()&#x51FD;&#x6570;&#xFF0C;&#x8C03;&#x7528;&#x4E86;readsect()<br><img src="/2017/01/08/JOS1/Exercise3_3.png" alt=""><br>&#x6240;&#x4EE5;&#x8BF4;&#xFF0C;&#x8981;&#x5148;&#x8DDF;&#x8E2A;&#x8FDB;&#x5165;bootmain()&#x51FD;&#x6570;&#x4E2D;&#x7684;readseg()&#xFF0C;&#x5728;&#x8DDF;&#x8E2A;&#x8FD1;readsect(),&#x501F;&#x52A9;boot.asm&#x5F88;&#x65B9;&#x4FBF;&#x7684;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8FD9;&#x4E9B;&#x51FD;&#x6570;&#x7684;&#x5730;&#x5740;&#x3002;<br>&#x901A;&#x8FC7;si&#x5355;&#x6B65;&#x8FDB;&#x5165;readseg()&#x51FD;&#x6570;&#xFF0C;&#x5730;&#x5740;0x7cd1<br><img src="/2017/01/08/JOS1/Exercise3_4.png" alt=""><br>&#x7136;&#x540E;&#x5728;si&#x5355;&#x6B65;&#x8FDB;&#x5165;readsect(),&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x5077;&#x61D2;&#x76F4;&#x63A5;&#x5728;boot.asm&#x4E2D;&#x627E;&#x5230;&#x5FAA;&#x73AF;&#x5F00;&#x59CB;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x8BBE;&#x7F6E;&#x65AD;&#x70B9;&#xFF0C;&#x6267;&#x884C;&#x5230;&#x65AD;&#x70B9;,&#x8FD9;&#x91CC;&#x61D2;&#x5F97;&#x505A;&#x5C31;&#x6CA1;&#x6709;&#x505A;&#xFF0C;&#x76F4;&#x63A5;&#x8BFB;boot.asm&#x4E86;&#x3002;&#x3002;&#x3002;<br>&#x5FAA;&#x73AF;&#x7ED3;&#x675F;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x6307;&#x4EE4;&#x5730;&#x5740;&#x662F;0x7d61,&#x8FD9;&#x91CC;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#x4E3B;&#x8981;&#x662F;&#x8DF3;&#x8F6C;&#x6267;&#x884C;&#x5185;&#x6838;&#x5165;&#x53E3;&#x6587;&#x4EF6;entry.S<br><img src="/2017/01/08/JOS1/Exercise3_5.png" alt=""></p>
<p>&#x603B;&#x7ED3;&#x4E00;&#x4E0B;&#x5B9E;&#x9A8C;1&#x7684;&#x7B2C;&#x4E00;&#x90E8;&#x5206;&#xFF1A;</p>
<ul>
<li>&#x719F;&#x6089;x86&#x6C47;&#x7F16;&#x3002;</li>
<li>&#x4F7F;&#x7528;qemu&#x548C;gdb&#x8C03;&#x8BD5;&#xFF0C;&#x63A2;&#x7D22;BIOS&#x505A;&#x4E86;&#x4EC0;&#x4E48;&#x4E8B;&#x60C5;&#x3002;<ul>
<li>&#x8BBE;&#x7F6E;&#x4E2D;&#x65AD;&#x63CF;&#x8FF0;&#x7B26;&#x8868;</li>
<li>BIOS&#x4E3B;&#x8981;&#x529F;&#x80FD;&#x662F;&#x68C0;&#x67E5;&#x5E76;&#x521D;&#x59CB;&#x5316;&#x8BBE;&#x5907;&#xFF0C;&#x4F8B;&#x5982;VGA&#x7B49;</li>
<li>&#x63A2;&#x6D4B;&#x7269;&#x7406;&#x5185;&#x5B58;&#x5927;&#x5C0F;</li>
</ul>
</li>
<li>&#x4F7F;&#x7528;qemu&#x548C;gdb&#x8C03;&#x8BD5;jos&#x7684;boot loader&#x90E8;&#x5206;&#xFF0C;&#x63A2;&#x7D22;boot loader&#x7684;&#x529F;&#x80FD;&#xFF08;&#x8FD9;&#x4E2A;&#x6700;&#x597D;&#x662F;&#x5148;&#x8BFB;&#x6E90;&#x7801;&#xFF0C;&#x7136;&#x540E;&#x7ED3;&#x5408;&#x7740;&#x6E90;&#x7801;&#x548C;&#x53CD;&#x6C47;&#x7F16;&#x6587;&#x4EF6;&#x8C03;&#x8BD5;&#xFF09;&#x3002;<br>&#x4EE5;&#x4E0A;&#x3002;</li>
<li>&#x719F;&#x7EC3;&#x4F7F;&#x7528;gdb&#xFF0C;&#x5305;&#x62EC;&#x4EE5;&#x4E0B;&#x90E8;&#x5206;<br>&#x5355;&#x6B65;&#x6267;&#x884C;&#xFF1A;si<br>&#x8BBE;&#x7F6E;&#x65AD;&#x70B9;&#xFF1A;b *0x7c00<br>&#x7EE7;&#x7EED;&#x8FD0;&#x884C;&#x81F3;&#x65AD;&#x70B9;&#xFF1A;c<br>&#x53CD;&#x6C47;&#x7F16;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6307;&#x4EE4;&#xFF1A;x/Ni<br>&#x5173;&#x4E8E;gdb&#x7684;&#x90E8;&#x5206;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x4E0B;&#x8FD9;&#x91CC;&#xFF1A;<a href="http://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/gdb.html" target="_blank" rel="external">gdb</a></li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/jos/" rel="tag"># jos</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/06/18/资源整理/" rel="next" title="资源整理">
                <i class="fa fa-chevron-left"></i> 资源整理
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/01/10/test-images/" rel="prev" title="test images">
                test images <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="sheldonwong" />
          <p class="site-author-name" itemprop="name">sheldonwong</p>
           
              <p class="site-description motion-element" itemprop="description">all things about sheldonwong</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">21</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#介绍"><span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PC的启动"><span class="nav-text">PC的启动</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#练习1-熟悉汇编"><span class="nav-text">练习1 熟悉汇编</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#练习2-调试探索BIOS的功能"><span class="nav-text">练习2 调试探索BIOS的功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#练习3-调试探索boot-loader"><span class="nav-text">练习3 调试探索boot loader</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">sheldonwong</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>


        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  
    
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "df507b5a72cc4e748546fbb321dfc734",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
  










  





  

  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
  


  

  

</body>
</html>
